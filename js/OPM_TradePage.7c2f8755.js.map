{"version":3,"file":"js/OPM_TradePage.7c2f8755.js","mappings":"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","sources":["webpack://mytrades/./src/composables/usePage.js","webpack://mytrades/./src/utils/numberToFraction.js","webpack://mytrades/./src/utils/calcOPM.js","webpack://mytrades/./src/utils/common.js","webpack://mytrades/./src/pages/OPM/TradePage.vue","webpack://mytrades/./src/pages/OPM/TradePage.vue?ba09"],"sourcesContent":["import { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\n\r\nconst usePage = ( {title, message = {}} ) => {\r\n\r\n    const store = useStore()\r\n    store.commit('setTitle', title)\r\n    store.commit('setMessage', message)\r\n    const isLoading = ref(true)\r\n    const setMessage = ( { value, type } ) => {\r\n        store.commit('setMessage', { value, type })\r\n    }\r\n    return {\r\n        isLoading,\r\n        setMessage\r\n    }\r\n\r\n}\r\n\r\nexport default usePage","/**\r\n * from code: https://gist.github.com/danielbachhuber/ed56cde1eabd6677e34e23cb56f591b6\r\n * \r\n * Converts numbers to fractions:\r\n * - 1.25 to 1 1/4\r\n * - 2 to 2\r\n */\r\nconst numberToFraction = function( amount ) {\r\n    // This is a whole number and doesn't need modification.\r\n    if ( parseFloat( amount ) === parseInt( amount ) ) {\r\n        return amount;\r\n    }\r\n    // Next 12 lines are cribbed from https://stackoverflow.com/a/23575406.\r\n    var gcd = function(a, b) {\r\n        if (b < 0.0000001) {\r\n            return a;\r\n        }\r\n        return gcd(b, Math.floor(a % b));\r\n    };\r\n    var len = amount.toString().length - 2;\r\n    var denominator = Math.pow(10, len);\r\n    var numerator = amount * denominator;\r\n    var divisor = gcd(numerator, denominator);\r\n    numerator /= divisor;\r\n    denominator /= divisor;\r\n    var base = 0;\r\n    // In a scenario like 3/2, convert to 1 1/2\r\n    // by pulling out the base number and reducing the numerator.\r\n    if ( numerator > denominator ) {\r\n        base = Math.floor( numerator / denominator );\r\n        numerator -= base * denominator;\r\n    }\r\n    amount = Math.floor(numerator) + '/' + Math.floor(denominator);\r\n    if ( base ) {\r\n        amount = base + ' ' + amount;\r\n    }\r\n    return amount;\r\n}\r\n\r\nexport default numberToFraction","/*\r\n\r\nRdP = Registro de posiciones\r\n\r\nB   ;C      ;D          ;E;F        ;G  ;H          ;I          ;J      ;K  ;L      ;M  ;N  ;O  ;P  ;Q\r\nDIA ;MONEDA ;POSICION   ;X;ENTRADA  ;M/L;STOP_LOSS  ;TAKE_PROFIT;SALIDA;RISK;REWARD ;L/M;RRR;R  ;R2 ;RETORNO\r\n\r\nOCULTOS POR DEFAULT\r\n\r\n- RISK (K)      = =IF(AND('RdP'!$F3>0;'RdP'!$H3>0);'RdP'!$F3-'RdP'!$H3;0)\r\n- REWARD (L)    = =IF(AND('RdP'!$I3>0;'RdP'!$F3>0);'RdP'!$I3-'RdP'!$F3;0)\r\n- R (O)         = =IF('RdP'!$D3=\"LONG\";(('RdP'!$J3-'RdP'!$F3)/'RdP'!$F3)*'RdP'!$E3; (('RdP'!$F3-'RdP'!$J3)/'RdP'!$J3)*'RdP'!$E3)\r\n- R2 (P)        = =IF('RdP'!$G$3:$G$7=\"MARKET (*)\";IF('RdP'!$F3='RdP'!$J3;-0,225%*'RdP'!$E3;'RdP'!$O3-'RdP'!$O3*(0,225%*'RdP'!$E3));(IF('RdP'!$F3='RdP'!$J3;0,025%;'RdP'!$O3+'RdP'!$O3*(0,025%*'RdP'!$E3))))\r\n\r\nRRR     = =IF(AND('RdP'!$K3<>0;'RdP'!$L3<>0);(SUBSTITUTE(TEXT('RdP'!$K3/'RdP'!$L3;\"?/?\");\"/\";\":\"));\"REVISAR\")\r\nRETORNO = =IF(AND('RdP'!$D$3:$D$7<>0;'RdP'!$F$3:$F$7<>0;'RdP'!$G$3:$G$7<>0;'RdP'!$H$3:$H$7<>0;'RdP'!$I$3:$I$7<>0;'RdP'!$J$3:$J$7<>0;'RdP'!$M3<>0);IF('RdP'!$M$3:$M$7=\"MARKET (*)\";IF('RdP'!$F3='RdP'!$J3;-0,225%*'RdP'!$E3+'RdP'!$P3;'RdP'!$P3-'RdP'!$P3*(0,225%*'RdP'!$E3));(IF('RdP'!$F3='RdP'!$J3;0,025%*'RdP'!$E3+'RdP'!$P3;'RdP'!$P3+'RdP'!$P3*(0,025%*'RdP'!$E3))));\"COMPLETAR\")\r\n\r\nESPERANZA MATEMATICA    = =IF(COUNT('RdP'!$Q$3:$Q$7)>=5;IF(AB3<>0;IF(AA3<>0;((E13*(AA3/AB3))-E14)*-1;0);E13*AA3*100);\"AGREGAR TRADES\")\r\nCANTIDAD DE ACIERTOS    = =IF(SUM('RdP'!$Q$3:$Q$7)<>0;COUNTIF('RdP'!$Q$3:$Q$7;\">0\")/COUNT('RdP'!$Q$3:$Q$7);\"REVISAR\")\r\nF DE KELLY              = =IF(AND(E12<1;E13<0,5);2%;IF(SUM('RdP'!$Q$3:$Q$7)<>0;IF(AND(NOT(E12=\"AGREGAR TRADES\");E12>1;E13>0,5);(E13-(1-E13)/(AB4/AA4))/10/2;2%);\"REVISAR\"))\r\nPROMEDIO RESULTADOS     = =IF(E13<>\"REVISAR\";IF(AVERAGE('RdP'!$Q$3:$Q$7)=0;\"REVISAR\";AVERAGE('RdP'!$Q$3:$Q$7));\"REVISAR\")\r\n\r\nOTROS DATOS (E12 = Esperanza Matematica, E13 = Cantidad de aciertos, E14 = F de Kelly, E15 = Promedio Resultados)\r\n- =IF(E12<>\"AGREGAR TRADES\";IF(E12<1;\"(*) SISTEMA NO RENTABLE\";\"(*) SISTEMA RENTABLE\");0)\r\n- =IF(E13<>\"REVISAR\";IF(AND(E13<50%;E16<0);\"(*) MAS STOP LOSS QUE TAKE PROFITS\";0);0)\r\n- =IF(E15=2%;\"(*) TAMAÑO DE POSICION NEUTRAL\";IF(E15>2%;\"(*) POSICION AGRESIVA\"))\r\n- =IF(E12<>\"AGREGAR TRADES\";IF(AND(E16<0;E12<>0;IF(E13<>0;(AVERAGEIF('RdP'!$Q$3:$Q$7;\">0\")/-AVERAGEIF('RdP'!$Q$3:$Q$7;\"<0\")-1)<-20%;0);E13>=E14);\"(*) ¿LEVERAGE EN PERDIDAS MUY ALTO? ¿RRR BAJO?\";0);0)\r\n\r\nEsperanza matematica: IF(AB3<>0;IF(AA3<>0;((E13*(AA3/AB3))-E14)*-1;0);E13*AA3*100);\r\nCantidad de aciertos se calcula: (cantidad de retorno > 0 / cantidad de retornos) * 100\r\nF de Kelly se calcula: ((E13-(1-E13)/(AB4/AA4))/10/2) * 100\r\nPromedio Resultados: average(retorno)\r\n\r\nAB4 = AVERAGE(NEGATIVAS RETORNO) \r\nAA4 = AVERAGE(POSITIVAS RETORNO)\r\nAA3 = SUM(POSITIVAS RETORNO) / total trades con retorno\r\nAB3 = SUM(NEGATIVAS RETORNO) / total trades con retorno\r\n*/\r\n\r\nimport { computed } from 'vue'\r\nimport numberToFraction from '@/utils/numberToFraction'\r\n\r\nconst calcOPM = function(data) {\r\n\r\n    const calcR = computed(() => {\r\n        const trade             = data\r\n        const isPositionLong    = trade.value.position === \"long\"\r\n        const priceClose        = trade.value.priceClose\r\n        const priceIn           = trade.value.priceIn\r\n        const xValue            = trade.value.x\r\n        const divPriceIn        = (priceIn === 0 || priceIn === \"\") === 0 ? 1 : priceIn\r\n        const divPriceClose     = (priceClose === 0 || priceClose === \"\") ? 1 : priceClose\r\n\r\n        if(isPositionLong) {\r\n            return (((priceClose - priceIn) / divPriceIn) * xValue) * 100\r\n        }\r\n        return (((priceIn - priceClose) / divPriceClose) * xValue) * 100\r\n\r\n    })\r\n \r\n    const calcR2 = computed(() => {\r\n        const trade         = data\r\n        const isMlMarket    = trade.value.mL === \"MARKET\"\r\n        const isEqualPrice  = trade.value.priceIn === trade.value.priceClose\r\n        const calcRValue    = calcR.value\r\n        const xValue        = trade.value.x\r\n\r\n        if(isMlMarket) {\r\n            if(isEqualPrice) {\r\n                return -(-0.225 * xValue)\r\n            }\r\n            return -((calcRValue/100) * (0.225 * xValue) - calcRValue)\r\n        }\r\n\r\n        if(isEqualPrice) {\r\n            return 0.025\r\n        }\r\n        return (calcRValue/100 * (0.025 * xValue)) + calcRValue\r\n\r\n    })\r\n\r\n    const calcRF = computed(() => {\r\n        const trade = data\r\n        if(trade.value.takeProfit > 0 && trade.value.priceIn > 0) {\r\n            return (trade.value.takeProfit - trade.value.priceIn)\r\n        }\r\n        return 0\r\n    })\r\n\r\n    const calcRisk = computed(() => {\r\n        const trade = data\r\n        if(trade.value.priceIn > 0 && trade.value.stopLoss > 0) {\r\n            return (trade.value.priceIn - trade.value.stopLoss)\r\n        }\r\n        return 0\r\n    })\r\n\r\n    const calcRrr = computed(() => {\r\n        const calcRiskValue = parseFloat(calcRisk.value)\r\n        const calcRFValue   = parseFloat(calcRF.value)\r\n\r\n        if(calcRiskValue !== 0 && calcRFValue !== 0) {\r\n            let calcRRRF = calcRiskValue/calcRFValue\r\n            if(calcRiskValue < 0) {\r\n                calcRRRF = -(calcRiskValue)/calcRFValue\r\n            }\r\n            calcRRRF = numberToFraction(calcRRRF);\r\n            return calcRRRF.toString().split(\"/\").join(\":\")\r\n        }\r\n\r\n        return \"REVISAR\"\r\n\r\n    })\r\n\r\n    const calcReturn = computed(() => {\r\n        const trade         = data\r\n        const isLmMarket    = trade.value.lM === 'MARKET'\r\n        const isEqualPrice  = trade.value.priceIn === trade.value.priceClose\r\n        const calcR2Value   = calcR2.value\r\n        const xValue        = trade.value.x\r\n\r\n        if(isLmMarket) {\r\n          if(isEqualPrice) {\r\n            return -(-(-0.225 * xValue) + calcR2Value) // -0.225 * (xValue + calcR2Value)\r\n          } \r\n          return -((calcR2Value/100) * (0.225 * xValue) - calcR2Value)\r\n        }\r\n\r\n        if(isEqualPrice) {\r\n            return (0.025 * xValue) + calcR2Value\r\n        }  \r\n        return (calcR2Value/100 * (0.025 * xValue)) + calcR2Value\r\n        \r\n    })\r\n\r\n    const calcTotals = computed(() => {\r\n        let trades          = data\r\n        let avgReturn       = 0\r\n        let avgReturnCount  = 0\r\n        let returnMay0      = 0\r\n        let returnMin0      = 0\r\n        let porcOK          = 0\r\n        let fKelly          = 0\r\n        let sumReturnPos    = 0\r\n        let sumReturnNeg    = 0\r\n        let mat             = 0\r\n        let hasTrades       = trades.value.length > 0\r\n        let sysRent         = \"\"\r\n        let SLTP            = \"\" \r\n        let position        = \"\" \r\n        let question        = \"\"\r\n        let SLPI            = \"\"\r\n\r\n        if(hasTrades) {\r\n        \r\n            trades.value.forEach( trade => {\r\n          \r\n                let ret = parseFloat(trade.calcReturn)\r\n        \r\n                if(ret > 0) {\r\n                  sumReturnPos += ret\r\n                  returnMay0++\r\n                } else {\r\n                  sumReturnNeg += ret\r\n                  returnMin0++\r\n                }\r\n        \r\n                avgReturn += parseFloat(trade.calcReturn)\r\n                avgReturnCount++\r\n        \r\n              }) \r\n      \r\n              if(returnMin0 === 0) returnMin0 = 1\r\n              if(returnMay0 === 0) returnMay0 = 1\r\n      \r\n              avgReturn   = avgReturn/(avgReturnCount === 0 ? 1 : avgReturnCount)\r\n              porcOK      = (returnMay0/(avgReturnCount === 0 ? 1 : avgReturnCount)) * 100\r\n              let AB4     = sumReturnNeg / returnMin0 \r\n              let AA4     = sumReturnPos / returnMay0 \r\n              let E13     = porcOK / 100\r\n              AB4         = AB4 === 0 ? 1 : AB4\r\n              AA4         = AA4 === 0 ? 1 : AA4\r\n              fKelly      = ((E13-(1-E13)/(AB4/AA4))/10/2) * 100  \r\n              let E14     = (100 - (E13 * 100)) / 100\r\n              let AA3     = (sumReturnPos / returnMay0) * (E13 === 0 ? 1 : E13) \r\n              let AB3     = (sumReturnNeg / returnMin0) * (E14 === 0 ? 1 : E14) \r\n      \r\n              if(AB3 !== 0) {\r\n                if(AA3 !== 0) {\r\n                  mat = ((E13*(AA3/AB3))-E14)*-1\r\n                } else {\r\n                  mat = 0\r\n                }\r\n              } else {\r\n                mat = E13*AA3*100\r\n              }\r\n      \r\n              sysRent   = (mat < 1)  ? \"| Sistema NO Rentable\" : \"| Sistema Rentable\"\r\n              SLTP      = (E13<50 && porcOK<0) ? \"| Mas stop loss que take profits\" : \"\"\r\n              position  = ((fKelly===2) ? \"| Tamaño de posición neutral\" : (fKelly>2 ? \"| Posición Agresiva\" : \"\"));\r\n              question  = \"| ¿Leverage en perdidas muy alto? ¿RRR bajo?\";\r\n              SLPI      = (E14 > 90) ? \"| ¿stop-loss muy cercano a la entrada?\" : \"\"\r\n        }\r\n\r\n        /*\r\n            IF(\r\n                E12<>\"AGREGAR TRADES\";\r\n                IF(\r\n                    AND(\r\n                        E16<0;E12<>0;\r\n                        IF(\r\n                            E13<>0;\r\n                            (AVERAGEIF($Q$3:$Q$7;\">0\")/-AVERAGEIF($Q$3:$Q$7;\"<0\")-1) < -20%;\r\n                            0\r\n                        );\r\n                        E13>=E14\r\n                    );\r\n                    \"(*) ¿LEVERAGE EN PERDIDAS MUY ALTO? ¿RRR BAJO?\";\r\n                    0\r\n                );\r\n                0\r\n            )\r\n        */\r\n\r\n        return {\r\n          avgReturn,\r\n          porcOK, // E16\r\n          fKelly,\r\n          mat, // E12\r\n          sysRent,\r\n          SLTP,\r\n          position,\r\n          question,\r\n          SLPI\r\n        }\r\n    })\r\n\r\n    return {\r\n        calcR,\r\n        calcR2,\r\n        calcRF,\r\n        calcRisk,\r\n        calcRrr,\r\n        calcReturn,\r\n        calcTotals\r\n    }\r\n\r\n}\r\n\r\nexport default calcOPM","const getTimeToFormat = (time) => {\r\n    console.log(time);\r\n    let date = (time === 0 || time === undefined) ? new Date() : new Date(time);\r\n    let day = date.getDate();\r\n    let month = date.getMonth() + 1;\r\n    let year = date.getFullYear();\r\n    let hour = (date.getHours() <= 9 ? '0' : '') + date.getHours(); \r\n    let minute = (date.getMinutes() <= 9 ? '0' : '') + date.getMinutes(); \r\n    //let second = (date.getSeconds() <= 9 ? '0' : '') + date.getSeconds();\r\n    return '' + year + '-' + (month<=9 ? '0' + month : month) + '-' + (day <= 9 ? '0' + day : day) + ' ' + hour + ':' + minute; // + ':' + second;\r\n}\r\n\r\nconst currentDateTime = () => {\r\n    let date    = new Date();\r\n    let day     = date.getDate();\r\n    let month   = date.getMonth() + 1;\r\n    let year    = date.getFullYear();\r\n    let hour    = (date.getHours() <= 9 ? '0' : '') + date.getHours(); \r\n    let minute  = (date.getMinutes() <= 9 ? '0' : '') + date.getMinutes(); \r\n    let second  = (date.getSeconds() <= 9 ? '0' : '') + date.getSeconds();\r\n    return '' + year + '-' + (month<=9 ? '0' + month : month) + '-' + (day <= 9 ? '0' + day : day) + '-' + hour + '-' + minute + '-' + second;\r\n}\r\n\r\nexport default {\r\n\tgetTimeToFormat,\r\n    currentDateTime\r\n}","<template>\r\n  <form v-if=\"!isLoading\" class=\"my-2\">\r\n    <!-- #### ROW 1 - PER, POSITION #### -->\r\n    <div class=\"row\">\r\n      <div class=\"col-12 col-md-3\">\r\n        <div class=\"form-floating mb-2\">\r\n          <input type=\"text\" v-model=\"trade.per\" class=\"form-control text-uppercase form-control-sm bg-dark text-white border-0 shadow-none\" id=\"inputPER\" placeholder=\"BTC\">\r\n          <label for=\"inputPER\" class=\"text-warning\">Crypto/Token</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-3 mb-2\">\r\n        <label class=\"text-muted\" for=\"Position\">Position</label><br/>\r\n        <div class=\"form-check form-check-inline\">\r\n          <input v-model=\"trade.position\" class=\"form-check-input shadow-none\" value=\"short\" type=\"radio\" name=\"flexRadioDefault\" id=\"flexRadioDefault1\" checked>\r\n          <label class=\"form-check-label text-muted border-bottom border-danger border-1\" for=\"flexRadioDefault1\">Short</label>\r\n        </div>\r\n        <div class=\"form-check form-check-inline\">\r\n          <input v-model=\"trade.position\" class=\"form-check-input shadow-none\" value=\"long\" type=\"radio\" name=\"flexRadioDefault\" id=\"flexRadioDefault2\">\r\n          <label class=\"form-check-label text-muted border-bottom border-success border-1\" for=\"flexRadioDefault2\">Long</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- #### ROW 2 - LEVERAGE, ENTRY PRICE, M/L #### -->\r\n    <div class=\"row\">\r\n      <div class=\"col-12 col-md-3\">\r\n        <div class=\"form-floating mb-2\">\r\n          <input type=\"number\" v-model=\"trade.x\" class=\"form-control text-uppercase form-control-sm bg-dark text-white border-0 shadow-none\" id=\"inputX\" placeholder=\"8\">\r\n          <label for=\"inputX\" class=\"text-warning\">Leverage (X)</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-3\">\r\n        <div class=\"form-floating mb-2\">\r\n          <input type=\"number\" v-model=\"trade.priceIn\" class=\"form-control text-uppercase form-control-sm bg-dark text-white border-0 shadow-none\" step=\"0.000000000001\" id=\"inputPriceIn\" placeholder=\"0.0001\">\r\n          <label for=\"inputPriceIn\" class=\"text-warning\">Entry Price</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-3 mb-2\">\r\n        <label class=\"text-muted\" for=\"inputML\">M/L</label><br/>\r\n        <div class=\"form-check form-check-inline\">\r\n          <input v-model=\"trade.mL\" class=\"form-check-input shadow-none\" value=\"MARKET\" type=\"radio\" name=\"flexRadioDefault2\" id=\"flexRadioDefault3\" checked>\r\n          <label class=\"form-check-label text-muted\" for=\"flexRadioDefault3\">Market (*)</label>\r\n        </div>\r\n        <div class=\"form-check form-check-inline\">\r\n          <input v-model=\"trade.mL\" class=\"form-check-input shadow-none\" value=\"LIMIT\" type=\"radio\" name=\"flexRadioDefault2\" id=\"flexRadioDefault4\">\r\n          <label class=\"form-check-label text-muted\" for=\"flexRadioDefault4\">Limit (*)</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- #### ROW 3 - STOP LOSS, TAKE PROFIT, CLOSE PRICE, L/M #### -->\r\n    <div class=\"row\">\r\n      <div class=\"col-12 col-md-3\">\r\n        <div class=\"form-floating mb-2\">\r\n          <input type=\"number\" v-model=\"trade.stopLoss\" class=\"form-control text-uppercase form-control-sm bg-dark text-white border-0 shadow-none\" step=\"0.000000000001\" id=\"inputStopLoss\" placeholder=\"0.0001\">\r\n          <label for=\"inputStopLoss\" class=\"text-warning\">Stop Loss</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-3\">\r\n        <div class=\"form-floating mb-2\">\r\n          <input type=\"number\" v-model=\"trade.takeProfit\" class=\"form-control text-uppercase form-control-sm bg-dark text-white border-0 shadow-none\" step=\"0.000000000001\" id=\"inputTakeProfit\" placeholder=\"0.0001\">\r\n          <label for=\"inputTakeProfit\" class=\"text-warning\">Take Profit</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-3\">\r\n        <div class=\"form-floating mb-2\">\r\n          <input type=\"number\" v-model=\"trade.priceClose\" class=\"form-control text-uppercase form-control-sm bg-dark text-white border-0 shadow-none\" step=\"0.000000000001\" id=\"inputPriceClose\" placeholder=\"0.0001\">\r\n          <label for=\"inputPriceClose\" class=\"text-warning\">Close Price</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-3 mb-2\">\r\n        <label class=\"text-muted\" for=\"inputLM\">L/M</label><br/>\r\n        <div class=\"form-check form-check-inline\">\r\n          <input v-model=\"trade.lM\" class=\"form-check-input shadow-none\" value=\"MARKET\" type=\"radio\" name=\"flexRadioDefault3\" id=\"flexRadioDefault5\" checked>\r\n          <label class=\"form-check-label text-muted\" for=\"flexRadioDefault5\">Market (*)</label>\r\n        </div>\r\n        <div class=\"form-check form-check-inline\">\r\n          <input v-model=\"trade.lM\" class=\"form-check-input shadow-none\" value=\"LIMIT\" type=\"radio\" name=\"flexRadioDefault3\" id=\"flexRadioDefault6\">\r\n          <label class=\"form-check-label text-muted\" for=\"flexRadioDefault6\">Limit (*)</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- #### ROW 4 - CREATE BY USER, CREATE AT #### -->\r\n    <div class=\"row\">\r\n      <div class=\"col-6 col-md-3\">\r\n        <div class=\"form-floating mb-2\">\r\n          <input type=\"text\" v-model=\"trade.createdByUser\" class=\"form-control text-uppercase form-control-sm bg-dark text-white border-0 shadow-none\" id=\"inputCreatedByUser\" placeholder=\"31/10/2008 01:02:03\">\r\n          <label for=\"inputCreatedByUser\" class=\"text-warning\">Created by User</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6 col-md-3\" v-if=\"!isNewTrade\">\r\n        <div class=\"form-floating mb-2\">\r\n          <input type=\"text\" v-model=\"trade.createdAt\" class=\"form-control text-uppercase form-control-sm bg-dark text-white border-0 shadow-none\" id=\"inputCreatedAt\" placeholder=\"\" readonly>\r\n          <label for=\"inputCreatedAt\" class=\"text-warning\">Created At (readonly)</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- #### ROW 5 - BUTTONS (HIDE DEFAULT) #### -->\r\n    <div class=\"row m-0 mb-2\" :class=\"{ 'd-none': buttonsDisplay }\">\r\n      <div class=\"col-12 p-0 text-muted text-end\" v-if=\"isNewTrade\">\r\n        <hr class=\"border border-2 border-dark\" />\r\n        <button class=\"btn btn-warning\" @click.prevent=\"saveTrade('')\">Create</button> or <button class=\"btn btn-dark \" @click.prevent=\"saveTrade('test')\">Create as Test</button>\r\n        &nbsp;<button class=\"btn btn-dark\" @click.prevent=\"buttonsDisplay = true\">X</button>\r\n      </div>\r\n      <div class=\"col-12 p-0 text-muted text-end\" v-else>\r\n        <hr class=\"border border-2 border-dark\" />\r\n        <button class=\"btn btn-warning\" @click.prevent=\"saveTrade()\">Save</button> or <button class=\"btn btn-danger\" @click.prevent=\"removeTrade()\">Delete</button>\r\n        &nbsp;<button class=\"btn btn-dark\" @click.prevent=\"buttonsDisplay = true\">X</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" :class=\"{ 'd-none': !buttonsDisplay }\"><div class=\"col-12 p-4\"></div></div>\r\n  </form>\r\n  <div v-else class=\"text-white\">\r\n    <div class=\"d-flex justify-content-center\">\r\n      <div class=\"spinner-border m-5 text-warning\" role=\"status\">\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- #### FOOTER NAV - TOTALS ##### -->\r\n  <nav class=\"navbar fixed-bottom bg-dark bg-opacity-75 py-2 px-1\" :class=\"{ 'd-none': !buttonsDisplay }\">\r\n    <div class=\"container-fluid justify-content-end\">\r\n        <span class=\"text-center px-1 py-0\" :class=\"[calcReturn < 0 ? 'text-danger text-opacity-75' : 'text-success']\"><strong>%calcReturn</strong> {{calcReturn.toFixed(2)}}%</span>\r\n        <span class=\"text-center px-1 py-0\" :class=\"[calcR < 0 ? 'text-danger text-opacity-75' : 'text-success']\"><strong>%calcR</strong> {{calcR.toFixed(2)}}%</span>\r\n        <span class=\"text-center px-1 py-0\" :class=\"[calcRisk < 0 ? 'text-danger text-opacity-75' : 'text-success']\"><strong>Risk</strong> {{calcRisk.toFixed(2)}}%</span>\r\n        <span class=\"text-center px-1 py-0 text-muted\"><strong>RF</strong> {{calcRF.toFixed(2)}}</span>\r\n        <span class=\"text-center px-1 py-0\" :class=\"[calcRrr < 0 ? 'text-danger text-opacity-75' : calcRrr === 0 ? 'text-warning' : 'text-success']\"><strong>calcRrr</strong> {{calcRrr}}%</span>\r\n        <span class=\"text-center px-1 py-0\" :class=\"[calcR2 < 0 ? 'text-danger text-opacity-75' : 'text-success']\"><strong>calcR2</strong> {{calcR2.toFixed(2)}}</span>\r\n        <div class=\"row m-0 mt-2 px-2\">\r\n          <div class=\"col-12 p-0 text-muted text-end\" v-if=\"isNewTrade\">\r\n            <button class=\"btn btn-warning\" @click.prevent=\"saveTrade('')\">Create</button> or\r\n            <button class=\"btn btn-dark border border-warning\" @click.prevent=\"saveTrade('test')\">Create as test</button>\r\n            &nbsp;<button class=\"btn btn-dark\" @click.prevent=\"buttonsDisplay = false\">X</button>\r\n          </div>\r\n          <div class=\"col-12 p-0 text-muted text-end\" v-else>\r\n            <button class=\"btn btn-warning\" @click.prevent=\"saveTrade()\">Save</button> or <button class=\"btn btn-danger\" @click.prevent=\"removeTrade()\">Delete</button>\r\n            &nbsp;<button class=\"btn btn-dark\" @click.prevent=\"buttonsDisplay = false\">X</button>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport apiTrade from '@/services/trade'\r\nimport common from '@/utils/common'\r\nimport calcOPM from '@/utils/calcOPM'\r\nimport usePage from '@/composables/usePage'\r\n\r\nexport default {\r\n    name: 'OPMTradePage',\r\n    props: { id: String },\r\n    emits: [],\r\n    setup() {\r\n      const classCommon   = \"form-control form-control-sm bg-dark text-white border-0\"\r\n      const router        = useRouter()\r\n      const route         = useRoute()\r\n      const isNewTrade    = (route.params.id === undefined)\r\n      const page          = usePage({ title: (isNewTrade ? 'New Trade OPM' : 'Trade OPM #' + route.params.id)}) \r\n      const buttonsDisplay= ref(true)\r\n\r\n      // Trade: default data\r\n      const trade = ref({\r\n        id            : isNewTrade ? 0 : route.params.id,\r\n        per           : '',\r\n        position      : 'short',\r\n        x             : 1,\r\n        priceIn       : 0,\r\n        mL            : 'MARKET',\r\n        stopLoss      : 0,\r\n        takeProfit    : 0,\r\n        priceClose    : 0,\r\n        calcRisk      : 0,\r\n        calcRF        : 0,\r\n        lM            : 'MARKET',\r\n        calcRrr       : 0,\r\n        calcR         : 0,\r\n        calcR2        : 0,\r\n        calcReturn    : 0,\r\n        createdByUser : common.getTimeToFormat((new Date).getTime()),\r\n        orderType     : 'test',\r\n        createdAt     : (new Date).getTime(),\r\n        status        : 'open'\r\n      })\r\n\r\n      const { calcR, calcR2, calcRrr, calcRF, calcRisk, calcReturn } = calcOPM(trade)\r\n\r\n      const saveTrade = (type) => {\r\n        trade.value.createdByUser = Date.parse(trade.value.createdByUser) \r\n        trade.value.orderType     = type === undefined ? trade.value.orderType : type\r\n        trade.value.status        = trade.value.priceClose !== '' ? 'closed' : 'open'\r\n        trade.value.calcReturn    = calcReturn\r\n        trade.value.calcR         = calcR\r\n        trade.value.calcR2        = calcR2\r\n        trade.value.calcRrr       = calcRrr\r\n        trade.value.calcRF        = calcRF\r\n        trade.value.calcRisk      = calcRisk\r\n\r\n        apiTrade.save({...trade.value})\r\n        page.setMessage({ value: '¡trade saved!', type: 'success'})\r\n        router.push({ name: 'OPMTradeListPage'})\r\n      }\r\n\r\n      const removeTrade = () => {\r\n        apiTrade.remove(trade.value)\r\n        page.setMessage({ value: '¡trade removed!', type: 'success'})\r\n        router.push({ name: 'OPMTradeListPage'})\r\n      }\r\n\r\n      onMounted(() => {\r\n        if(!isNewTrade) {\r\n          apiTrade.get(route.params.id).then(t => {\r\n            t.createdByUser = common.getTimeToFormat(t.createdByUser)\r\n            t.createdAt     = common.getTimeToFormat(t.createdAt)\r\n            trade.value     = t\r\n            setTimeout(function() { page.isLoading.value = false }, 200)\r\n          }).catch(() => router.push({ name: 'OPMTradeListPage', params: {message: 'Err!'}}))\r\n        } else {\r\n          page.isLoading.value = false\r\n        }\r\n      })\r\n\r\n      return {\r\n          buttonsDisplay,\r\n          classCommon,\r\n          trade,\r\n          calcReturn,\r\n          calcR,\r\n          calcR2,\r\n          calcRrr,\r\n          calcRF,\r\n          calcRisk,\r\n          isNewTrade,\r\n          isLoading : page.isLoading,\r\n          saveTrade,\r\n          removeTrade,\r\n          common\r\n      }\r\n    }\r\n}\r\n</script>","import { render } from \"./TradePage.vue?vue&type=template&id=1902113d\"\nimport script from \"./TradePage.vue?vue&type=script&lang=js\"\nexport * from \"./TradePage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\usuario\\\\Desktop\\\\github\\\\mytrades\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["usePage","title","message","store","useStore","commit","isLoading","ref","setMessage","value","type","numberToFraction","amount","parseFloat","parseInt","gcd","a","b","Math","floor","len","toString","length","denominator","pow","numerator","divisor","base","calcOPM","data","calcR","computed","trade","isPositionLong","position","priceClose","priceIn","xValue","x","divPriceIn","divPriceClose","calcR2","isMlMarket","mL","isEqualPrice","calcRValue","calcRF","takeProfit","calcRisk","stopLoss","calcRrr","calcRiskValue","calcRFValue","calcRRRF","split","join","calcReturn","isLmMarket","lM","calcR2Value","calcTotals","trades","avgReturn","avgReturnCount","returnMay0","returnMin0","porcOK","fKelly","sumReturnPos","sumReturnNeg","mat","hasTrades","sysRent","SLTP","question","SLPI","forEach","ret","AB4","AA4","E13","E14","AA3","AB3","getTimeToFormat","time","console","log","date","undefined","Date","day","getDate","month","getMonth","year","getFullYear","hour","getHours","minute","getMinutes","currentDateTime","second","getSeconds","class","_createElementVNode","for","_hoisted_59","role","_hoisted_62","$setup","_createElementBlock","_hoisted_63","per","$event","id","placeholder","_hoisted_5","_hoisted_7","_hoisted_8","name","checked","_hoisted_10","_hoisted_12","_hoisted_16","step","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_24","_hoisted_26","_hoisted_30","_hoisted_33","_hoisted_36","_hoisted_38","_hoisted_39","_hoisted_41","_hoisted_43","createdByUser","_hoisted_47","createdAt","readonly","_hoisted_50","_hoisted_52","onClick","_hoisted_56","_hoisted_65","_toDisplayString","toFixed","_hoisted_66","_hoisted_67","_hoisted_69","_hoisted_70","_hoisted_71","props","String","emits","setup","classCommon","router","useRouter","route","useRoute","isNewTrade","params","page","buttonsDisplay","common","getTime","orderType","status","saveTrade","parse","apiTrade","push","removeTrade","onMounted","then","t","setTimeout","catch","__exports__","render"],"sourceRoot":""}